{"version":3,"sources":["db/dbmanager.js"],"names":["createDb","closeDb","createUserModule","Schema","createConnection","db","close","userScheMa","name","String","password","index","path","unique","model"],"mappings":";;;;;QAKgBA,Q,GAAAA,Q;QAKAC,O,GAAAA,O;QAIAC,gB,GAAAA,gB;;AAdhB;;;;;;AAEA;AACA,MAAMC,SAAS,mBAASA,MAAxB;;AAEO,SAASH,QAAT,GAAoB;AACvB;AACA,WAAO,mBAASI,gBAAT,CAA0B,0BAA1B,CAAP;AACH;;AAEM,SAASH,OAAT,CAAiBI,EAAjB,EAAqB;AACxBA,OAAGC,KAAH;AACH;;AAEM,SAASJ,gBAAT,CAA0BG,EAA1B,EAA8B;AACjC;AACA,UAAME,aAAa,IAAIJ,MAAJ,CAAW;AAC1BK,cAAMC,MADoB;AAE1BC,kBAAUD;AAFgB,KAAX,CAAnB;;AAKAF,eAAWI,KAAX,CAAiB;AACb;AACAH,cAAM;AAFO,KAAjB;;AAKAD,eAAWK,IAAX,CAAgB,MAAhB,EAAwBD,KAAxB,CAA8B;AAC1B;AACAE,gBAAQ;AAFkB,KAA9B;;AAKA;AACA,WAAOR,GAAGS,KAAH,CAAS,OAAT,EAAkBP,UAAlB,CAAP;AACH","file":"dbmanager.js","sourcesContent":["import mongoose from 'mongoose';\n\n//  模型\nconst Schema = mongoose.Schema;\n\nexport function createDb() {\n    // 连接数据库，没有的话会自动创建\n    return mongoose.createConnection('mongodb://localhost/test');\n}\n\nexport function closeDb(db) {\n    db.close();\n}\n\nexport function createUserModule(db) {\n    //  定义了一个新的模型，但是此模式还未和users集合有关联\n    const userScheMa = new Schema({\n        name: String,\n        password: String,\n    });\n\n    userScheMa.index({\n        // 1和-1分别表示升序索引和降序索引\n        name: 1,\n    });\n\n    userScheMa.path('name').index({\n        // 设置唯一\n        unique: true,\n    });\n    \n    // 与users集合关联，如果使用，会自动创建一个集合\n    return db.model('users', userScheMa);\n}"]}