{"version":3,"sources":["inner/cors.js"],"names":["corsMixmin","app","all","req","res","next","header","method","sendStatus"],"mappings":";;;;;kBAGwBA,U;AAHxB;;;AAGe,SAASA,UAAT,CAAoBC,GAApB,EAAyB;AACpC;AACAA,QAAIC,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC7BD,YAAIE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAF,YAAIE,MAAJ,CAAW,8BAAX,EAA2C,kBAA3C;AACAF,YAAIE,MAAJ,CAAW,8BAAX,EAA2C,6BAA3C;AACAF,YAAIE,MAAJ,CAAW,cAAX,EAA2B,QAA3B;AACA,YAAIH,IAAII,MAAJ,KAAe,SAAnB,EAA8B;AAC1B;AACA;AACAH,gBAAII,UAAJ,CAAe,GAAf;AACH,SAJD,MAIO;AACH;AACA,gBAAIL,IAAII,MAAJ,KAAe,KAAnB,EAA0B;AACtBH,oBAAIE,MAAJ,CAAW,cAAX,EAA2B,WAA3B;AACH,aAFD,MAEO;AACHF,oBAAIE,MAAJ,CAAW,cAAX,EAA2B,gCAA3B;AACH;AACDD;AACH;AACJ,KAlBD;AAmBH","file":"cors.js","sourcesContent":["/**\n * 跨域的配置单独抽取\n */\nexport default function corsMixmin(app) {\n    // 设置跨域访问相关\n    app.all('*', (req, res, next) => {\n        res.header('Access-Control-Allow-Origin', '*');\n        res.header('Access-Control-Allow-Headers', 'X-Requested-With');\n        res.header('Access-Control-Allow-Methods', 'PUT,POST,GET,DELETE,OPTIONS');\n        res.header('X-Powered-By', ' 3.2.1');\n        if (req.method === 'OPTIONS') {\n            // 让options请求快速返回\n            // options只在预检时才有\n            res.sendStatus(200);\n        } else {\n            // 默认为json\n            if (req.method === 'GET') {\n                res.header('Content-Type', 'text/html');\n            } else {\n                res.header('Content-Type', 'application/json;charset=utf-8');\n            }\n            next();\n        }\n    });\n}"]}